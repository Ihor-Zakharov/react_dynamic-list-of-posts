{"version":3,"sources":["components/Loader/Loader.tsx","utils/fetchClient.ts","components/PostsList.tsx","components/UserSelector.tsx","components/NewCommentForm.tsx","components/PostDetails.tsx","App.tsx","index.tsx"],"names":["Loader","className","BASE_URL","wait","delay","Promise","resolve","setTimeout","request","url","method","data","options","body","JSON","stringify","headers","then","fetch","response","json","client","PostsList","selectedPost","handlePostSelect","userId","useState","posts","setPosts","isLoading","setIsLoading","error","setError","useEffect","fetchPosts","a","postsData","length","map","post","id","title","isPostSelected","type","classNames","onClick","UserSelector","users","handleUserSelect","selectedUser","listOpened","setListOpened","ref","useRef","handleOpenListButtonClick","useCallback","handleUsersOptionClick","user","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","role","name","href","formDefaultValue","email","NewCommentForm","postId","postCommentError","showNewComment","formValue","setFormValue","emptyName","emptyEmail","emptyBody","errors","setErrors","addButtonClicked","setAddButtonClicked","useMemo","prevState","handleInputChange","propertyName","value","handleClearButtonClick","handleFormSubmit","preventDefault","Object","values","forEach","addComment","comment","newComment","showEmptyNameError","showEmptyEmailError","showEmptyBodyError","onSubmit","htmlFor","placeholder","onChange","PostDetails","comments","setComments","showNewCommentForm","setShowNewCommentForm","fetchComments","commentsData","handleDeleteCommentButton","commentId","filter","handleWriteCommentButtonClick","commentBody","App","setUsers","setSelectedUser","setSelectedPost","fetchUsers","usersData","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.471053e6.chunk.js","sourcesContent":["import './Loader.scss';\n\nexport const Loader = () => (\n  <div className=\"Loader\" data-cy=\"Loader\">\n    <div className=\"Loader__content\" />\n  </div>\n);\n","const BASE_URL = 'https://mate.academy/students-api';\n\n// a promise resolved after a given delay\nfunction wait(delay: number) {\n  return new Promise(resolve => {\n    setTimeout(resolve, delay);\n  });\n}\n\n// To have autocompletion and avoid mistypes\ntype RequestMethod = 'GET' | 'POST' | 'PATCH' | 'DELETE';\n\nfunction request<T>(\n  url: string,\n  method: RequestMethod = 'GET',\n  data: any = null, // we can send any data to the server\n): Promise<T> {\n  const options: RequestInit = { method };\n\n  if (data) {\n    // We add body and Content-Type only for the requests with data\n    options.body = JSON.stringify(data);\n    options.headers = {\n      'Content-Type': 'application/json; charset=UTF-8',\n    };\n  }\n\n  // for a demo purpose we emulate a delay to see if Loaders work\n  return wait(300)\n    .then(() => fetch(BASE_URL + url, options))\n    .then(response => response.json());\n}\n\nexport const client = {\n  get: <T>(url: string) => request<T>(url),\n  post: <T>(url: string, data: any) => request<T>(url, 'POST', data),\n  patch: <T>(url: string, data: any) => request<T>(url, 'PATCH', data),\n  delete: (url: string) => request(url, 'DELETE'),\n};\n","import React, { useEffect, useState } from 'react';\nimport classNames from 'classnames';\nimport { Post } from '../types/Post';\nimport { Loader } from './Loader';\nimport { client } from '../utils/fetchClient';\n\ninterface Props {\n  handlePostSelect: (post: Post) => void;\n  selectedPost: Post | null;\n  userId: number\n}\n\nexport const PostsList: React.FC<Props> = ({\n  selectedPost,\n  handlePostSelect,\n  userId,\n}) => {\n  const [posts, setPosts] = useState<Post[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(false);\n\n  useEffect(() => {\n    const fetchPosts = async () => {\n      try {\n        setIsLoading(true);\n\n        const postsData = await client.get<Post[]>(`/posts?userId=${userId}`);\n\n        setPosts(postsData);\n      } catch {\n        setError(true);\n\n        if (!posts.length) {\n          setPosts([]);\n        }\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    fetchPosts();\n  }, [userId]);\n\n  if (isLoading) {\n    return <Loader />;\n  }\n\n  if (error) {\n    return (\n      <div className=\"notification is-danger\" data-cy=\"PostsLoadingError\">\n        Something went wrong!\n      </div>\n    );\n  }\n\n  if (!posts.length) {\n    return (\n      <div className=\"notification is-warning\" data-cy=\"NoPostsYet\">\n        No posts yet\n      </div>\n    );\n  }\n\n  return (\n    <div data-cy=\"PostsList\">\n      <p className=\"title\">Posts:</p>\n\n      <table className=\"table is-fullwidth is-striped is-hoverable is-narrow\">\n        <thead>\n          <tr className=\"has-background-link-light\">\n            <th>#</th>\n            <th>Title</th>\n            <th> </th>\n          </tr>\n        </thead>\n\n        <tbody>\n          {posts.map((post) => {\n            const { id, title } = post;\n            const isPostSelected = post === selectedPost;\n\n            return (\n              <tr data-cy=\"Post\" key={id}>\n                <td data-cy=\"PostId\">{id}</td>\n                <td data-cy=\"PostTitle\">{title}</td>\n\n                <td className=\"has-text-right is-vcentered\">\n                  <button\n                    type=\"button\"\n                    data-cy=\"PostButton\"\n                    className={classNames('button is-link', {\n                      'is-light': !isPostSelected,\n                    })}\n                    onClick={() => handlePostSelect(post)}\n                  >\n                    {isPostSelected ? 'Close' : 'Open'}\n                  </button>\n                </td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n","import React, {\n  useCallback, useEffect, useRef, useState,\n} from 'react';\nimport classNames from 'classnames';\nimport { User } from '../types/User';\n\ninterface Props {\n  users: User[];\n  handleUserSelect: (user: User) => void;\n  selectedUser: User | null;\n}\n\nexport const UserSelector: React.FC<Props> = ({\n  users,\n  handleUserSelect,\n  selectedUser,\n}) => {\n  const [listOpened, setListOpened] = useState(false);\n\n  const ref = useRef<HTMLDivElement>(null);\n\n  const handleOpenListButtonClick = useCallback(() => {\n    setListOpened(true);\n  }, []);\n\n  const handleUsersOptionClick = useCallback((user: User) => {\n    setListOpened(false);\n    handleUserSelect(user);\n  }, [handleUserSelect]);\n\n  const handleClickOutside = useCallback((event: MouseEvent) => {\n    if (ref.current && !ref.current.contains(event.target as Node)) {\n      setListOpened(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    document.addEventListener('click', handleClickOutside);\n\n    return () => {\n      document.removeEventListener('click', handleClickOutside);\n    };\n  }, [handleClickOutside]);\n\n  return (\n    <div\n      data-cy=\"UserSelector\"\n      className={classNames('dropdown', { 'is-active': listOpened })}\n      ref={ref}\n    >\n      <div className=\"dropdown-trigger\">\n        <button\n          type=\"button\"\n          className=\"button\"\n          aria-haspopup=\"true\"\n          aria-controls=\"dropdown-menu\"\n          onClick={handleOpenListButtonClick}\n        >\n          <span>Choose a user</span>\n\n          <span className=\"icon is-small\">\n            <i className=\"fas fa-angle-down\" aria-hidden=\"true\" />\n          </span>\n        </button>\n      </div>\n\n      <div className=\"dropdown-menu\" id=\"dropdown-menu\" role=\"menu\">\n        <div className=\"dropdown-content\">\n          {users.map((user) => {\n            const { id, name } = user;\n\n            return (\n              <a\n                key={id}\n                href={`#user-${id}`}\n                className={classNames('dropdown-item', {\n                  'is-active': selectedUser === user,\n                })}\n                onClick={() => handleUsersOptionClick(user)}\n              >\n                {name}\n              </a>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React, {\n  useCallback, useEffect, useMemo, useState,\n} from 'react';\nimport classNames from 'classnames';\nimport { Comment, CommentData } from '../types/Comment';\nimport { client } from '../utils/fetchClient';\n\nconst formDefaultValue: CommentData = {\n  name: '',\n  email: '',\n  body: '',\n};\n\ninterface Props {\n  postId: number;\n  postCommentError: () => void;\n  showNewComment: (newComment: Comment) => void;\n}\n\nexport const NewCommentForm: React.FC<Props> = ({\n  postId,\n  postCommentError,\n  showNewComment,\n}) => {\n  const [formValue, setFormValue] = useState<CommentData>(formDefaultValue);\n  const [isLoading, setIsLoading] = useState(false);\n  const [errors, setErrors] = useState({\n    emptyName: true,\n    emptyEmail: true,\n    emptyBody: true,\n  });\n  const [addButtonClicked, setAddButtonClicked] = useState(false);\n\n  const { name, email, body } = useMemo(() => formValue, [formValue]);\n  const { emptyName, emptyEmail, emptyBody } = useMemo(() => errors, [errors]);\n\n  useEffect(() => {\n    if (name === formDefaultValue.name) {\n      setErrors((prevState) => ({ ...prevState, emptyName: true }));\n    } else {\n      setErrors((prevState) => ({ ...prevState, emptyName: false }));\n    }\n  }, [name, formDefaultValue.name]);\n\n  useEffect(() => {\n    if (email === formDefaultValue.email) {\n      setErrors((prevState) => ({ ...prevState, emptyEmail: true }));\n    } else {\n      setErrors((prevState) => ({ ...prevState, emptyEmail: false }));\n    }\n  }, [email, formDefaultValue.name]);\n\n  useEffect(() => {\n    if (body === formDefaultValue.body) {\n      setErrors((prevState) => ({ ...prevState, emptyBody: true }));\n    } else {\n      setErrors((prevState) => ({ ...prevState, emptyBody: false }));\n    }\n  }, [body, formDefaultValue.body]);\n\n  const handleInputChange = useCallback(\n    (\n      event:\n      | React.ChangeEvent<HTMLInputElement>\n      | React.ChangeEvent<HTMLTextAreaElement>,\n      propertyName: keyof CommentData,\n    ) => {\n      setFormValue((prevState) => ({\n        ...prevState,\n        [propertyName]: event.target.value,\n      }));\n\n      if (addButtonClicked) {\n        setAddButtonClicked(false);\n      }\n    },\n    [formValue, addButtonClicked],\n  );\n\n  const handleClearButtonClick = useCallback(() => {\n    setFormValue(formDefaultValue);\n    setAddButtonClicked(false);\n  }, []);\n\n  const handleFormSubmit = useCallback(\n    (event: React.FormEvent<HTMLFormElement>) => {\n      event.preventDefault();\n\n      Object.values(errors).forEach((error) => {\n        if (error) {\n          setAddButtonClicked(true);\n        }\n      });\n\n      const addComment = async () => {\n        try {\n          setIsLoading(true);\n\n          const comment = {\n            ...formValue,\n            postId,\n          };\n\n          const newComment = await client.post<Comment>('/comments', comment);\n\n          showNewComment(newComment);\n\n          setFormValue((prevState) => ({ ...prevState, body: '' }));\n        } catch {\n          postCommentError();\n        } finally {\n          setIsLoading(false);\n        }\n      };\n\n      addComment();\n    },\n    [formValue, errors],\n  );\n\n  const showEmptyNameError = useMemo(\n    () => emptyName && addButtonClicked,\n    [emptyName, addButtonClicked],\n  );\n  const showEmptyEmailError = useMemo(\n    () => emptyEmail && addButtonClicked,\n    [emptyEmail, addButtonClicked],\n  );\n  const showEmptyBodyError = useMemo(\n    () => emptyBody && addButtonClicked,\n    [emptyBody, addButtonClicked],\n  );\n\n  return (\n    <form\n      data-cy=\"NewCommentForm\"\n      onSubmit={(event) => handleFormSubmit(event)}\n    >\n      <div className=\"field\" data-cy=\"NameField\">\n        <label className=\"label\" htmlFor=\"comment-author-name\">\n          Author Name\n        </label>\n\n        <div className=\"control has-icons-left has-icons-right\">\n          <input\n            type=\"text\"\n            name=\"name\"\n            id=\"comment-author-name\"\n            placeholder=\"Name Surname\"\n            className={classNames('input', { 'is-danger': showEmptyNameError })}\n            value={name}\n            onChange={(event) => handleInputChange(event, 'name')}\n          />\n\n          <span className=\"icon is-small is-left\">\n            <i className=\"fas fa-user\" />\n          </span>\n\n          {showEmptyNameError && (\n            <span\n              className=\"icon is-small is-right has-text-danger\"\n              data-cy=\"ErrorIcon\"\n            >\n              <i className=\"fas fa-exclamation-triangle\" />\n            </span>\n          )}\n        </div>\n\n        {showEmptyNameError && (\n          <p className=\"help is-danger\" data-cy=\"ErrorMessage\">\n            Name is required\n          </p>\n        )}\n      </div>\n\n      <div className=\"field\" data-cy=\"EmailField\">\n        <label className=\"label\" htmlFor=\"comment-author-email\">\n          Author Email\n        </label>\n\n        <div className=\"control has-icons-left has-icons-right\">\n          <input\n            type=\"text\"\n            name=\"email\"\n            id=\"comment-author-email\"\n            placeholder=\"email@test.com\"\n            className={classNames('input', {\n              'is-danger': showEmptyEmailError,\n            })}\n            value={email}\n            onChange={(event) => handleInputChange(event, 'email')}\n          />\n\n          <span className=\"icon is-small is-left\">\n            <i className=\"fas fa-envelope\" />\n          </span>\n\n          {showEmptyEmailError && (\n            <span\n              className=\"icon is-small is-right has-text-danger\"\n              data-cy=\"ErrorIcon\"\n            >\n              <i className=\"fas fa-exclamation-triangle\" />\n            </span>\n          )}\n        </div>\n\n        {showEmptyEmailError && (\n          <p className=\"help is-danger\" data-cy=\"ErrorMessage\">\n            Email is required\n          </p>\n        )}\n      </div>\n\n      <div className=\"field\" data-cy=\"BodyField\">\n        <label className=\"label\" htmlFor=\"comment-body\">\n          Comment Text\n        </label>\n\n        <div className=\"control\">\n          <textarea\n            id=\"comment-body\"\n            name=\"body\"\n            placeholder=\"Type comment here\"\n            className={classNames('input', { 'is-danger': showEmptyBodyError })}\n            value={body}\n            onChange={(event) => handleInputChange(event, 'body')}\n          />\n        </div>\n\n        {showEmptyBodyError && (\n          <p className=\"help is-danger\" data-cy=\"ErrorMessage\">\n            Enter some text\n          </p>\n        )}\n      </div>\n\n      <div className=\"field is-grouped\">\n        <div className=\"control\">\n          <button\n            type=\"submit\"\n            className={classNames('button is-link', {\n              'is-loading': isLoading,\n            })}\n          >\n            Add\n          </button>\n        </div>\n\n        <div className=\"control\">\n          {/* eslint-disable-next-line react/button-has-type */}\n          <button\n            type=\"reset\"\n            className=\"button is-link is-light\"\n            onClick={handleClearButtonClick}\n          >\n            Clear\n          </button>\n        </div>\n      </div>\n    </form>\n  );\n};\n","import React, {\n  useCallback, useEffect, useMemo, useState,\n} from 'react';\nimport { Loader } from './Loader';\nimport { Post } from '../types/Post';\nimport { Comment } from '../types/Comment';\nimport { NewCommentForm } from './NewCommentForm';\nimport { client } from '../utils/fetchClient';\n\ninterface Props {\n  post: Post;\n}\n\nexport const PostDetails: React.FC<Props> = ({ post }) => {\n  const [comments, setComments] = useState<Comment[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(false);\n  const [showNewCommentForm, setShowNewCommentForm] = useState(false);\n\n  const { id, title, body } = useMemo(() => post, [post]);\n\n  useEffect(() => {\n    const fetchComments = async () => {\n      try {\n        setIsLoading(true);\n\n        const commentsData = await client.get<Comment[]>(\n          `/comments?postId=${id}`,\n        );\n\n        setComments(commentsData);\n      } catch {\n        setError(true);\n\n        if (comments.length) {\n          setComments([]);\n        }\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    fetchComments();\n\n    setShowNewCommentForm(false);\n  }, [post]);\n\n  const handleDeleteCommentButton = useCallback((commentId: number) => {\n    client.delete(`/comments/${commentId}`);\n\n    setComments((prevState) => (\n      prevState.filter((comment) => comment.id !== commentId)\n    ));\n  }, []);\n\n  const handleWriteCommentButtonClick = useCallback(() => {\n    setShowNewCommentForm(true);\n  }, []);\n\n  const postCommentError = useCallback(() => {\n    setError(true);\n  }, []);\n\n  const showNewComment = useCallback(\n    (newComment: Comment) => {\n      setComments((prevState) => [...prevState, newComment]);\n    },\n    [comments],\n  );\n\n  return (\n    <div className=\"content\" data-cy=\"PostDetails\">\n      <div className=\"content\" data-cy=\"PostDetails\">\n        <div className=\"block\">\n          <h2 data-cy=\"PostTitle\">{`#${id}: ${title}`}</h2>\n\n          <p data-cy=\"PostBody\">{body}</p>\n        </div>\n\n        {isLoading ? (\n          <Loader />\n        ) : (\n          <>\n            <div className=\"block\">\n              {error && (\n                <div className=\"notification is-danger\" data-cy=\"CommentsError\">\n                  Something went wrong\n                </div>\n              )}\n\n              {!comments.length ? (\n                <p className=\"title is-4\" data-cy=\"NoCommentsMessage\">\n                  No comments yet\n                </p>\n              ) : (\n                <>\n                  <p className=\"title is-4\">Comments:</p>\n\n                  {comments.map((comment) => {\n                    const {\n                      id: commentId, name, body: commentBody, email,\n                    } = comment;\n\n                    return (\n                      <article\n                        className=\"message is-small\"\n                        data-cy=\"Comment\"\n                        key={commentId}\n                      >\n                        <div className=\"message-header\">\n                          <a href={`mailto:${email}`} data-cy=\"CommentAuthor\">\n                            {name}\n                          </a>\n                          <button\n                            data-cy=\"CommentDelete\"\n                            type=\"button\"\n                            className=\"delete is-small\"\n                            aria-label=\"delete\"\n                            onClick={() => handleDeleteCommentButton(commentId)}\n                          >\n                            delete button\n                          </button>\n                        </div>\n\n                        <div className=\"message-body\" data-cy=\"CommentBody\">\n                          {commentBody}\n                        </div>\n                      </article>\n                    );\n                  })}\n                </>\n              )}\n\n              {!showNewCommentForm && (\n                <button\n                  data-cy=\"WriteCommentButton\"\n                  type=\"button\"\n                  className=\"button is-link\"\n                  onClick={handleWriteCommentButtonClick}\n                >\n                  Write a comment\n                </button>\n              )}\n            </div>\n\n            {showNewCommentForm && (\n              <NewCommentForm\n                postId={id}\n                postCommentError={postCommentError}\n                showNewComment={showNewComment}\n              />\n            )}\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n","import React, { useCallback, useEffect, useState } from 'react';\nimport 'bulma/bulma.sass';\nimport '@fortawesome/fontawesome-free/css/all.css';\nimport './App.scss';\n\nimport classNames from 'classnames';\nimport { PostsList } from './components/PostsList';\nimport { UserSelector } from './components/UserSelector';\n\nimport { User } from './types/User';\nimport { client } from './utils/fetchClient';\nimport { Post } from './types/Post';\nimport { PostDetails } from './components/PostDetails';\n\nexport const App: React.FC = () => {\n  const [users, setUsers] = useState<User[]>([]);\n  const [selectedUser, setSelectedUser] = useState<User | null>(null);\n  const [selectedPost, setSelectedPost] = useState<Post | null>(null);\n\n  useEffect(() => {\n    const fetchUsers = async () => {\n      try {\n        const usersData = await client.get<User[]>('/users');\n\n        setUsers(usersData);\n      } catch {\n        if (users.length) {\n          setUsers([]);\n        }\n      }\n    };\n\n    fetchUsers();\n  }, []);\n\n  const handleUserSelect = useCallback((user: User) => {\n    setSelectedUser(user);\n  }, []);\n\n  const handlePostSelect = useCallback((post: Post) => {\n    setSelectedPost(post);\n  }, []);\n\n  return (\n    <main className=\"section\">\n      <div className=\"container\">\n        <div className=\"tile is-ancestor\">\n          <div className=\"tile is-parent\">\n            <div className=\"tile is-child box is-success\">\n              <div className=\"block\">\n                <UserSelector\n                  users={users}\n                  handleUserSelect={handleUserSelect}\n                  selectedUser={selectedUser}\n                />\n              </div>\n\n              <div className=\"block\" data-cy=\"MainContent\">\n                {!selectedUser ? (\n                  <p data-cy=\"NoSelectedUser\"> No user selected </p>\n                ) : (\n                  <PostsList\n                    handlePostSelect={handlePostSelect}\n                    selectedPost={selectedPost}\n                    userId={selectedUser.id}\n                  />\n                )}\n              </div>\n            </div>\n          </div>\n\n          {selectedPost && (\n            <div\n              data-cy=\"Sidebar\"\n              className={classNames(\n                'tile',\n                'is-parent',\n                'is-8-desktop',\n                'Sidebar',\n                'Sidebar--open',\n              )}\n            >\n              <div className=\"tile is-child box is-success \">\n                <PostDetails post={selectedPost} />\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </main>\n  );\n};\n","import ReactDOM from 'react-dom';\n\nimport { App } from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}